"use strict";(self.webpackChunkTomate_Azul=self.webpackChunkTomate_Azul||[]).push([[160],{6329:function(e,t,n){n.r(t),n.d(t,{default:function(){return u}});var a=n(161),l=n(3129),o=n(1760),c=n(7294),r=n(2753),s=n(8084),i=n(3569),d=n(7515);function u(){var e,t,n;const{0:u,1:m}=(0,c.useState)(!1),{0:p,1:E}=(0,c.useState)(""),{0:f,1:h}=(0,c.useState)([]),{0:g,1:k}=(0,c.useState)(),{0:C,1:b}=(0,c.useState)(!1),{0:v,1:x}=(0,c.useState)(!0),{0:A,1:S}=(0,c.useState)({}),{0:T,1:Z}=(0,c.useState)(""),{0:y,1:j}=(0,c.useState)(!1);return(0,c.useEffect)((()=>{u&&fetch({}.GATSBY_API_URL+"/pedidos.json?auth="+A.accessToken).then((e=>{e.json().then((e=>{h(e)}))})).catch((e=>{console.log(e),Z(e.message)}))}),[u,C]),(0,c.useEffect)((()=>{v||setTimeout((()=>{x(!0)}),3e3)}),[v]),c.createElement(c.Fragment,null,T&&c.createElement(d.Z,{errorMessage:T}),c.createElement(a.Z,{open:y},c.createElement(s.Z,{className:"tomateModal"},c.createElement("p",{className:"tomateModalTitle"},"O pedido ",null===(e=f[g])||void 0===e?void 0:e.id," será excluído para sempre."),c.createElement("p",null,"Você já salvou os dados do cliente?"),c.createElement("div",{className:"tomateModalActions"},c.createElement(l.Z,{variant:"contained",color:"warning",onClick:function(){fetch({}.GATSBY_API_URL+"/pedidos/"+g+".json?auth="+A.accessToken,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((()=>{h((()=>(delete f[g],{...f}))),j(!1)})).catch((e=>console.log(e)))},size:"small"},"EXCLUIR"),c.createElement(l.Z,{variant:"contained",color:"secondary",onClick:()=>j(!1),size:"small"},"CANCELAR"),c.createElement("a",{style:{padding:"10px",borderRadius:"5px",background:"green",color:"white",fontSize:"14px"},target:"_blank",href:"https://wa.me/55"+(null===(t=f[g])||void 0===t?void 0:t.telefone.replace(/[^0-9]/g,""))+'?text=Olá! Aqui é do Tomate Azul. Sobre o pedido "'+(null===(n=f[g])||void 0===n?void 0:n.id)+'"'},"WHATSAPP")))),c.createElement(r.Z,null,u?c.createElement(s.Z,{m:"0 auto",mt:"20px",width:"90%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},c.createElement(l.Z,{onClick:function(){b(!C),x(!1)},variant:"outlined",disabled:!v},"Atualizar Pedidos"),f&&Object.keys(f).length?Object.keys(f).map((e=>c.createElement(s.Z,{key:e,mb:"15px",mt:"15px",sx:{backgroundColor:"rgb(172, 178, 238)"}},c.createElement("h2",null,f[e].nome),c.createElement("h3",null,c.createElement("a",{target:"_blank",href:"https://wa.me/55"+f[e].telefone.replace(/[^0-9]/g,"")+'?text=Olá! Aqui é do Tomate Azul. Sobre o pedido "'+f[e].id+'"'},f[e].telefone)),c.createElement("p",null,f[e].data),c.createElement("p",null,f[e].pedido),c.createElement(l.Z,{onClick:()=>function(e){k(e),j(!0)}(e),variant:"contained"},"CONCLUIR")))):c.createElement("p",null,"Sem pedido no momento")):c.createElement(s.Z,{sx:{display:"flex",flexDirection:"column",justifyContent:"space-around",alignItems:"center",mt:"20px"}},c.createElement(o.Z,{id:"pwd",label:"senha",variant:"outlined",type:"password",onChange:function(e){E(e.target.value)}}),c.createElement(l.Z,{onClick:async function(){(0,i.zB)("tomate@barretolopes.com",p).then((e=>{e&&(m(!0),S(e))}))}},"Login"))))}}}]);
//# sourceMappingURL=component---src-pages-adm-tsx-15da465073f975eb7154.js.map