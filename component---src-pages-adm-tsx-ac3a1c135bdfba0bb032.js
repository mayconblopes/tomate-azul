"use strict";(self.webpackChunkTomate_Azul=self.webpackChunkTomate_Azul||[]).push([[160],{6329:function(e,t,n){n.r(t),n.d(t,{default:function(){return u}});var a=n(161),l=n(3129),o=n(1760),c=n(7294),r=n(2753),s=n(8084),i=n(3569),m=n(7515);function u(){var e;const{0:t,1:n}=(0,c.useState)(!1),{0:u,1:d}=(0,c.useState)(""),{0:p,1:E}=(0,c.useState)([]),{0:f,1:h}=(0,c.useState)(),{0:g,1:k}=(0,c.useState)(!1),{0:C,1:b}=(0,c.useState)(!0),{0:x,1:A}=(0,c.useState)({}),{0:S,1:T}=(0,c.useState)(""),{0:Z,1:v}=(0,c.useState)(!1);return(0,c.useEffect)((()=>{t&&fetch({}.GATSBY_API_URL+"/pedidos.json?auth="+x.accessToken).then((e=>{e.json().then((e=>{E(e)}))})).catch((e=>{console.log(e),T(e.message)}))}),[t,g]),(0,c.useEffect)((()=>{C||setTimeout((()=>{b(!0)}),3e3)}),[C]),c.createElement(c.Fragment,null,S&&c.createElement(m.Z,{errorMessage:S}),c.createElement(a.Z,{open:Z},c.createElement(s.Z,{className:"tomateModal"},c.createElement("p",{className:"tomateModalTitle"},"O pedido ",null===(e=p[f])||void 0===e?void 0:e.id," será excluído para sempre."),c.createElement("p",null,"Você já salvou os dados do cliente?"),c.createElement("div",{className:"tomateModalActions"},c.createElement(l.Z,{variant:"contained",color:"warning",onClick:function(){fetch({}.GATSBY_API_URL+"/pedidos/"+f+".json?auth="+x.accessToken,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((()=>{E((()=>(delete p[f],{...p}))),v(!1)})).catch((e=>console.log(e)))},size:"small"},"EXCLUIR"),c.createElement(l.Z,{variant:"contained",color:"secondary",onClick:()=>v(!1),size:"small"},"CANCELAR"),c.createElement("a",{style:{padding:"10px",borderRadius:"5px",background:"green",color:"white",fontSize:"14px"},target:"_blank",href:"https://wa.me/55"+p[f].telefone.replace(/[^0-9]/g,"")+'?text=Olá! Aqui é do Tomate Azul. Sobre o pedido "'+p[f].id+'"'},"WHATSAPP")))),c.createElement(r.Z,null,t?c.createElement(s.Z,{m:"0 auto",mt:"20px",width:"90%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},c.createElement(l.Z,{onClick:function(){k(!g),b(!1)},variant:"outlined",disabled:!C},"Atualizar Pedidos"),p&&Object.keys(p).length?Object.keys(p).map((e=>c.createElement(s.Z,{key:e,mb:"15px",mt:"15px",sx:{backgroundColor:"rgb(172, 178, 238)"}},c.createElement("h2",null,p[e].nome),c.createElement("h3",null,c.createElement("a",{target:"_blank",href:"https://wa.me/55"+p[e].telefone.replace(/[^0-9]/g,"")+'?text=Olá! Aqui é do Tomate Azul. Sobre o pedido "'+p[e].id+'"'},p[e].telefone)),c.createElement("p",null,p[e].data),c.createElement("p",null,p[e].pedido),c.createElement(l.Z,{onClick:()=>function(e){h(e),v(!0)}(e),variant:"contained"},"CONCLUIR")))):c.createElement("p",null,"Sem pedido no momento")):c.createElement(s.Z,{sx:{display:"flex",flexDirection:"column",justifyContent:"space-around",alignItems:"center",mt:"20px"}},c.createElement(o.Z,{id:"pwd",label:"senha",variant:"outlined",type:"password",onChange:function(e){d(e.target.value)}}),c.createElement(l.Z,{onClick:async function(){(0,i.zB)("tomate@barretolopes.com",u).then((e=>{e&&(n(!0),A(e))}))}},"Login"))))}}}]);
//# sourceMappingURL=component---src-pages-adm-tsx-ac3a1c135bdfba0bb032.js.map